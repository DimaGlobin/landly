# Landly Configuration
# This file contains default settings for docker-compose setup
# Copy to config.local.yml to override any settings

app:
  env: development
  name: landly
  version: 1.0.0
  base_url: http://localhost:8080

server:
  http:
    addr: :8080
    read_timeout: 30s
    write_timeout: 30s
  
  cors:
    allowed_origins:
      - http://localhost:3000
      - http://localhost:8080
    allowed_methods:
      - GET
      - POST
      - PUT
      - DELETE
      - OPTIONS
    allowed_headers:
      - Authorization
      - Content-Type

auth:
  jwt:
    secret: dev-secret-change-in-production-please
    access_token_ttl: 15m
    refresh_token_ttl: 168h  # 7 days

database:
  postgres:
    host: postgres
    port: 5432
    user: landly
    password: landly
    dbname: landly
    sslmode: disable
    max_open_conns: 25
    max_idle_conns: 5
    conn_max_lifetime: 5m

  redis:
    addr: redis:6379
    password: ""
    db: 0
    pool_size: 10

storage:
  s3:
    endpoint: minio:9000
    access_key: minioadmin
    secret_key: minioadmin
    bucket: landly-sites
    use_ssl: false
    region: us-east-1
  
  cdn:
    base_url: http://localhost:9000/landly-sites
    enabled: false

ai:
  provider: mock  # mock, openai, openrouter, anthropic
  response_format: json_schema
  max_retries: 1
  timeout: 45s
  
  openai:
    api_key: ""
    model: gpt-4
    max_tokens: 4000
    temperature: 0.7

  openrouter:
    api_key: ""
    model: openrouter/auto
    base_url: https://openrouter.ai/api/v1
    max_tokens: 4000
    temperature: 0.6
  
  anthropic:
    api_key: ""
    model: claude-3-opus-20240229
    max_tokens: 4000

render:
  tmp_dir: /tmp/landly
  cleanup_after: 1h

logging:
  level: info  # debug, info, warn, error
  format: json  # json, console
  output: stdout  # stdout, stderr, file

observability:
  metrics:
    enabled: false
    port: 9090
  
  tracing:
    enabled: false
    endpoint: ""
    sample_rate: 0.1

# Environment-specific overrides
# These can be overridden by config.local.yml or environment variables

# Example for production:
# app:
#   env: production
# server:
#   http:
#     addr: :80
# auth:
#   jwt:
#     secret: ${JWT_SECRET}  # from environment
# database:
#   postgres:
#     host: prod-db.example.com
#     password: ${DB_PASSWORD}
# storage:
#   s3:
#     endpoint: s3.amazonaws.com
#     use_ssl: true
#   cdn:
#     base_url: https://cdn.landly.com
#     enabled: true
